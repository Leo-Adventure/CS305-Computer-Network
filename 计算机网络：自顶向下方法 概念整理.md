# 计算机网络：自顶向下方法(Computer Networking : A Top-Down Approach) 术语概念整理

> **Author:  MQ_Adventure**
>
> **Duration:  June, 2022**

[TOC]

## 第一章：计算机网络和因特网

### 1.1 什么是因特网

主机 (host) / 端系统 (end system)

通信链路 (communication link)

分组交换机 (packet switch)：包括路由器和链路层交换机，作用：==forward packets==

传输速率 (transmission rate): bandwidth

分组 (packet)

路由器（router）

链路层交换机（link-layer switch）

路径（path）：一个分组所经历的一系列通信链路和分组交换机成为通过该网络的路径

因特网服务提供商 （ISP）：端系统通过 ISP 接入因特网，ISP 自身就是一个由多台分组交换机和多段通信链路组成的网络

请求评论（RFC）& 因特网工程任务组（IETF）: ==互联网标准==

套接字接口（socket interface）：一套发送程序必须遵循的规则集合

协议（protocol）：定义了在两个或多个==通信实体==之间交换的报文的==格式（format）和顺序(order)==，以及报文发送和/或接受一条报文或其他时间所==采取的动作(action taken)==

***

### 1.2 网络边缘

接入网（access network）: 将端系统物理连接到其边缘路由器的网络

数字用户线（DSL）& 数字用户线接入复用器（DSLAM）：在==用户==一侧，一个分配器把到达家庭的数据信号和电话信号分隔开，并将数据信号转发给 DSL 调制解调器； 在==电话公司==，DSLAM 把数据和电话信号分隔开，并将数据送往因特网。

电缆（fiber cable）: 共享广播媒体

数字用户线接入复用器（DSLAM）：将数据和电话信号分隔开，并将数据送往因特网

不对称接入（asymmetric）：上行速率和下行速率不同

混合光线同轴（HFC）：同时使用光纤和同轴电缆

物理媒体：同轴电缆（coaxial cable）、光纤（fiber opic cable）、卫星（satellite）

***

### 1.3 网络核心

存储转发传输（store-and-forward transmission）：在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组

输出缓存（output buffer）

排队时延（queuing delay）

分组丢失（packet loss）

路由选择协议（routing protocol）

电路交换（circuit switching）：dedicated resource，no sharing，恒定速率，预留资源（缓存，链路传输速率）

分组交换（packet switching）：更好的带宽共享，更加简单高效，实现成本更低

频分复用（FDM）：different channels transmitted in different frequency bands（不同的频道在不同的带宽里面传输）

时分复用（TDM）：不同的频道在不同的时隙里面传输

存在点（PoP）:其中客户 ISP 可以与提供商 ISP 连接

多宿（multi-home）：可以与两个或者更多提供商 ISP 连接

对等 （peer）：可以直接将相同等级结构的 ISP 连接，使得它们之间的所有流量经过直接连接而不是通过上游的中间 ISP 传输

因特网交换点（IXP）：是一个汇合点，多个 ISP 能够在这里一起对等

内容提供商网络（content provider network）: ==private network== that connects its data  centers to Internet, often bypassing tier-1, regional ISPs

***

### 1.4 分组交换网中的时延、丢包和吞吐量

处理时延（processing delay）: 检查分组首部和决定将该分组导向何处所需要的时间等等处理时间

排队时延（queuing delay）：取决于网络的拥塞程度

传输时延（transmission delay）：将所有分组的比特推向链路所需要的时间

传播时延（propagation delay）：从链路起点到路由器传播所需要的时间

流量强度（traffic intensity）：$La/R\ \ (a 是分组到达队列的平均速率，L 是一个分组含有的比特数量)$

端到端时延：$d_{end-to-end} = N(d_{proc} + d_{trans} + d_{prop})$

瓶颈链路（bottleneck link）: ==link on end-end path that constrains end-end throughput==

***

### 1.5 协议层次及其服务模型

协议栈（protocol stack）：各层的所有协议

报文（message）：位于应用层的信息分组

报文段（segment）：位于运输层的分组

数据报（datagram）：位于网络层的分组

帧（frame）：链路层分组

***

### 1.6 面向攻击的网络

病毒（virus）：需要某种形式的用户交互来感染用户设备的软件

蠕虫（worm）：一种无须任何明显用户交互就能进入设备的恶意软件

拒绝服务攻击（Denial-of-Service (DoS) attack）： 1. select target 2. break into hosts around the network 3. send packets to target from compromised hosts.

分组嗅探器（packet sniffer）

IP 哄骗（IP spoofing）: 将具有虚假源地址的分组诸如因特网

如何连接端系统和边缘路由器：接入网（access network）（家庭接入网，机构接入网（以太网））

互联接入 ISP 的中心目标：使得所有端系统能够彼此发送分组

OSI 比传统的五层协议结构多出来会话层以及表示层

链路层交换机实现了第一层和第二层，路由器实现了第一层到第三层协议栈

一个分组具有两种类型的字段：首部字段和有效载荷字段(payload field)

DoS攻击类型：弱点攻击，带宽洪泛，连接洪泛

![](picture/access.png)

![](picture/ISP.png)

## 第二章：应用层

### 2.1 应用层协议原理

**客户-服务器体系结构**

- 客户相互之间不直接通信
- 服务器总是开启，并且有固定的周知的地址，也就是 IP 地址



**P2P体系结构**

- 可扩展性（scalability）好
- 客户端之间可以直接通信



在相同端系统之间的进程使用进程间通信机制相互通信，在不同端系统之间的进程通过跨越计算机网络交换报文而相互通信。

套接字是同一台主机内应用层和运输层之间的接口。

标识进程需要的信息：1. 主机地址  2.在目的主机中指定接收进程的标识符

应用程序对运输层协议的要求：

- 可靠数据运输（是否可以确保由应用程序的一段发送的数据正确、完全地交付给该应用程序的另一端）
- 吞吐量保证（具有吞吐量要求的应用成为带宽敏感的应用）
- 定时保证
- 安全性

TCP 服务模型包括 1. 面向连接服务 2. 可靠数据传输服务

TCP 和 UDP 都没有提供加密机制，且不能够提供定时和吞吐量的保证

***

### 2.2 Web 和 HTTP

Web 的应用层协议是超文本传输协议（HTTP）

Web 页面是由对象组成的，一个 HTML 文件也是一个对象，每个对象都存储在服务器端，每个对象由 URL 进行寻址，每个 URL 地址包含主机名 + 路径名

HTTP 使用 TCP 作为它的支撑运输协议，并且 HTTP 是一个无状态协议（stateless protocol）

持续连接（persistent connection）：所有的请求及其相应经相同的 TCP 连接发送，HTTP 在默认方式下使用持续连接

往返时间（Round-Trip Time, RTT）: 一个短分组（即不考虑传输时延）从客户到服务器然后再返回客户所花费的时间。包括分组传播时延、分组在中间路由器和交换机上的排队时延和分组处理时延。由于涉及到三次握手，所以总的相应时间就是两个 RTT （一个用于建立 TCP 连接，一个用于请求以及接受对象）加上服务器传输 HTML 文件的时间。

HTTP 报文使用 ASCII 文本书写

==HTTP 请求报文==至少有一行，为请求行（request line），有三个字段（方法字段（GET, POST,...），URL 字段以及 HTTP 版本字段）。后继的就称为首部行（header line）。请求报文最后是实体体，如果使用 GET 方法，实体体为空，如果使用 POST 方法，实体体用来提交表单。

==HTTP 响应报文== 有三个部分，一个初始状态行（status line）（状态行有三个部分，协议版本字段、状态码以及相应状态信息），一个首部行，一个实体体（报文的主要部分）。

==HTTP响应报文首部行==里面的 Date 信息是指服务器检索、插入、发送该响应报文的时间，而不是对象创建或者最后修改的时间。而 Last-Modified：才是指示了对象创建或者最后修改的日期和时间。Content-Length：首部行指示了被发送对象中的字节数。

==Cookie 技术==四大组件：

- HTTP 响应报文当中的 cookie 首部行（Set-cookie: xxxx）
- HTTP 请求报文中的 cookie 首部行 (Cookie: xxxx)
- 在用户端系统中保留有一个 cookie文件，并由用户浏览器管理
- 位于 Web 站点的一个后端数据库

在用户端系统拥有对应网页的 cookie 文件之后，每请求一个 Web 页面，其浏览器都会查询该 cookie 文件并抽取她对这个网站的识别码，放到请求报文中包括识别码的 cookie 首部行中。

Web 缓存器（Web cache），代理服务器（proxy server）。可以大大减少对客户请求的响应时间，并且可以大大减少一个机构的接入链路到因特网的通信量。

==条件 GET  方法==，如果 1. 请求报文使用 GET 方法 2. 请求报文中包含一个 If-Modified-Since 首部行，那么这个报文就是一个条件 GET 请求报文。条件 GET 报文是 Web 代理缓存向服务器发起的，如果在该日期之后没有被修改，服务器不会在响应报文中包含该对象

***

### 2.3 因特网中的电子邮件

因特网电子邮件的三大部分：用户代理（user agent）、邮件服务器（mail server）、简单邮件传输协议（SMTP）

SMTP 基于 TCP，报文体部分只能使用 7比特 ASCII 表示。而使用HTTP传送前不需要将多媒体数据编码为 ASCII 码

SMTP 不使用中间邮件服务器发送邮件，如果没有发送成功，那么邮件就会停留在发送方的邮件服务器当中，等待新的尝试。

在 SMTP ==握手的阶段==，SMTP客户指示发送方的邮件地址和接收方的邮件地址。且报文的发送是==持续性==的，建立在相同的TCP 之上。

对于 SMTP 的每个报文，客户用一个新的 MAIL FROM 开始，用一个独立的句点指示该邮件的结束，即以 CRLF . CRLF 指示报文的结束，并且仅当所有邮件发送完成之后才会发送 QUIT。

SMTP 与 HTTP 之间的对比：

- HTTP 主要是一个 拉协议（pull protocol），而 SMTP 是一个推协议（push protocol）
- SMTP 要求每个报文采用7比特 ASCII 码格式，而 HTTP 数据不受这种限制
- HTTP 把每个对象都封装到它自己的 HTTP 相应报文当中，即一个对象对应一个报文，而 SMTP 则把所有报文对象放在一个报文当中

SMTP 报文格式：首部行 + 空白行 + 报文体

首部行中的 FROM: 和 TO: 不同于之前的 SMTP 命令，前者是 SMTP 报文的一部分，而后者是 SMTP 握手协议的一部分。

邮件发送过程：发送方代理 ->（SMTP） 发送方邮件服务器  ->(SMTP) 接收方邮件服务器 ->==（POP3、IMAP 或者 HTTP）== 接收方用户代理

POP3 工作流程：特许（authorization）(通过用户名以及口令鉴别用户)、事务处理、更新（出现在quit之后，结束POP会话并且删除在事务处理中标记为删除的报文）

下载并删除与下载并保留的区别在于用户下载邮件之后在其他客户端是否仍然可以访问该邮件。

在用户代理与邮件服务器之间的POP3会话期间，POP3服务器会保留状态信息，但是并不会在会话期间携带状态信息

POP3 协议没有给用户提供任何创建远程文件夹并为报文指派文件夹的方法，而 IMAP 有在远程创建文件夹以及将邮件从一个文件夹移动到另一个文件夹的命令。IMAP 另一个重要的特性在于允许用户代理处理获取报文某些部分的命令。

用户代理从邮件服务器获取邮件还可以通过 HTTP 协议实现。但是，邮件服务器在于其他的邮件服务器之间发送和接收邮件时，仍然使用的是 SMTP

***

### 2.4 DNS: 因特网的目录服务

DNS 协议建立在 UDP 之上，使用 53 号端口

DNS 服务：

- 主机名到 IP 地址的转换
- 主机别名（host aliasing），获得规范主机名（canonical  hostname）
- 邮件服务器别名（mail server aliasing）
- 负载分配（load distribution）

DNS 服务器集中式设计带来的问题：

- 单点故障（a single point of failure）
- 通信容量（traffic volume）
- 远距离的集中式数据库（distant centralized database）
- 维护（maintenance）

三中类型的 DNS 服务器：根 DNS 服务器、顶级域（TLD）服务器、权威DNS服务器

本地DNS 不属于服务器的层次结构，每个 ISP 都有一台本地



## 各大协议整理

### HTTP	

### SMTP

### DNS

### TCP

### UDP

### ...

## 计算题汇总

### 延迟计算（时延）

